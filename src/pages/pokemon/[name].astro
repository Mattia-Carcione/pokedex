<!-- ---
import type { Pokemon } from '../../utils/interfaces/types';
import { fetchAllByGeneration, fetchGenerationById, fetchGenerations } from '../../utils/pokeApi';
import Layout from '../../layouts/Layout.astro';
import PokemonDetail from '../../components/layouts/PokemonDetail.astro';
import { fetchPokemonByUrl } from '../../utils/pokeApi';

export async function getStaticPaths() {
  const gens = await fetchGenerations();
  const flat = await Promise.all(gens.map(async (g) => {
    const data = await fetchGenerationById(g.id);
    const pokemons = await fetchAllByGeneration(data.pokemon_species) as Pokemon[];
    return pokemons.map((pokemon) => {
      const name = pokemon.species.name.charAt(0).toUpperCase() + pokemon.species.name.slice(1);
      return {
        params: { name: pokemon.species.name },
        props: { name: name, pokemon: pokemon, gen: data, length: gens.length },
      }
    })
  }));
  return flat.flat();
}

const { name, pokemon, gen, length } = Astro.props;
const data: Pokemon = pokemon;
const title = "PoKéMon - " + name;
---

<Layout title={title} heroTitle='PoKéMon' description=''>
  <PokemonDetail pokemon={data} gen={gen} length={length} />
</Layout> -->